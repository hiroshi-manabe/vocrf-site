<!DOCTYPE html> 
<html> 
  <head> 
  <meta charset="UTF-8">
  <title>jQuery Mobile Sample</title> 
  <meta name="viewport" content="width=device-width, initial-scale=1,minimum-scale=1, maximum-scale=1"> 
  <link rel="stylesheet" href="jquery.mobile-1.0.min.css" />
  <script src="jquery-1.7.1.min.js"></script>
  <script src="data.js"></script>
  <script>
  $(document).bind("mobileinit", function() {
    $.mobile.page.prototype.options.addBackBtn = true;
  });
  var count;
  var correct_count;
  var cur_page = 0;
  var correct_one;
  var option_count = 2;

  $(function(){
    count = 0;
    correct_count = 0;
    next_question();
  })

  function next_question() {
    correct_one = Math.floor(Math.random() * option_count);
    $("#title" + cur_page).text(data[count][0]);
    used_dict = {};
    used_dict[count] = true;
    for (var i = 0; i < option_count; ++i) {
      var r;
      while (true) {
        r = Math.floor(Math.random() * data.length);
        if (used_dict[r]) continue;
        break;
      }
      used_dict[r] = true;
      $("#option_" + cur_page + "_" + i).text(data[r][1]);
    }
    $("#option_" + cur_page + "_" + correct_one).text(data[count][1]);
    ++count;
  }
  function button_touch(num) {
    if (num == correct_one) {
      var elem = $("#li_" + cur_page + "_" + num);
      elem.fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
      ++correct_count;
    }
    $("#footer0,#footer1").text("" + correct_count + "/" + count);
    cur_page = 1 - cur_page;
    next_question();
  }
  </script>
  <style>
  .big { font-size: 300%; }
  </style>
  <script src="jquery.mobile-1.0.min.js"></script>
</head>
<body>
  <div data-role="page" id="page0" data-theme="b">
    <div data-role="content">
      <ul data-role="listview" data-inset="true">
        <li data-role="list-divider"><span id="title0" class="big"></span></li>
        <li id="li_0_0" onclick="button_touch(0);"><a href="#page1">
          <h3 id="option_0_0"></h3>
        </a></li>
        <li id="li_0_1" onclick="button_touch(1);"><a href="#page1">
          <h3 id="option_0_1"></h3>
        </a></li>
      </ul>
    </div>
    <div data-role="footer">
      <h3><span id="footer0"></span></h4>
    </div>
  </div>
  <div data-role="page" id="page1" data-theme="b">
    <div data-role="content">
      <ul data-role="listview" data-inset="true">
        <li data-role="list-divider"><span id="title1" class="big"></span></li>
        <li id="li_1_0" onclick="button_touch(0);"><a href="#page0">
          <h3 id="option_1_0"></h3>
        </a></li>
        <li id="li_1_1" onclick="button_touch(1);"><a href="#page0">
          <h3 id="option_1_1"></h3>
        </a></li>
      </ul>
    </div>
    <div data-role="footer">
      <h3><span id="footer1"></span></h4>
    </div>
  </div>
</body>
</html>
